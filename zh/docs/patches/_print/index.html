<!doctype html><html lang=zh class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.87.0"><link rel=canonical type=text/html href=/zh/docs/patches/>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>补丁 | KLTS.io</title>
<meta name=description content="KLTS 的官网"><meta property="og:title" content="补丁">
<meta property="og:description" content="KLTS 的官网">
<meta property="og:type" content="website">
<meta property="og:url" content="/zh/docs/patches/"><meta property="og:site_name" content="KLTS.io">
<meta itemprop=name content="补丁">
<meta itemprop=description content="KLTS 的官网"><meta name=twitter:card content="summary">
<meta name=twitter:title content="补丁">
<meta name=twitter:description content="KLTS 的官网">
<link rel=preload href=/scss/main.min.650bdee92aa16b3ae39822dd8dfd62356c714a590c397f4abe76572440c62901.css as=style>
<link href=/scss/main.min.650bdee92aa16b3ae39822dd8dfd62356c714a590c397f4abe76572440c62901.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/zh/>
<span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">KLTS.io</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/zh/about/><span>关于</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/zh/docs/><span class=active>文档</span></a>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
中文 Chinese
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/>English</a>
</div>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
<input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.e7f44d320472ce601bd8b8611f71ba72.json data-offline-search-base-href=/ data-offline-search-max-results=10>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
</div>
<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
</div>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.
</p><p>
<a href=/zh/docs/patches/>返回本页常规视图</a>.
</p>
</div>
<h1 class=title>补丁</h1>
<ul>
<li>1: <a href=#pg-fa6c26ffb59581078942a7046be853db>CVE-2019-1002101</a></li>
<li>2: <a href=#pg-678704d1c81cba20ab7f9af62e484052>CVE-2019-11245</a></li>
<li>3: <a href=#pg-17adf9e532c044f0bc96bf2fe6fabb70>CVE-2019-11246</a></li>
<li>4: <a href=#pg-d902d3ffd5b3d43bf94a51814ab569c7>CVE-2019-11247</a></li>
<li>5: <a href=#pg-da5de8654ce647927106ce1dae3b6382>CVE-2019-11248</a></li>
<li>6: <a href=#pg-9677918ea7ce2b1d4116bfb9d4d31512>CVE-2019-11249</a></li>
<li>7: <a href=#pg-3bb42a6493fbd1d3d06aad85c3d8d1e7>CVE-2019-11251</a></li>
<li>8: <a href=#pg-c1ec3633b18a80bee04f17816082420b>CVE-2020-8552</a></li>
<li>9: <a href=#pg-5aa68ad2e414f83fec8b9beb2250fdd3>CVE-2020-8558</a></li>
<li>10: <a href=#pg-ce240d314dc85c8ab698d26f1466e5a2>CVE-2020-8559</a></li>
<li>11: <a href=#pg-d4317cf8912bca37373fe5558d2d6285>CVE-2021-3121</a></li>
<li>12: <a href=#pg-66481705776642cc7da302c2a84c2907>nokmem</a></li>
</ul>
<div class=content>
</div>
</div>
<div class=td-content>
<h1 id=pg-fa6c26ffb59581078942a7046be853db>1 - CVE-2019-1002101</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-1002101 target>详细信息</a>
<p>此漏洞可能允许攻击者利用 <code>kubectl cp</code> 命令执行解压过程中修改或监控符号链接头同名目录下的任意文件造成破坏。</p>
<h2 id=scope>漏洞影响</h2>
<p><code>kubectl cp</code> 命令允许用户在容器和用户机器之间拷贝文件，攻击者可能通过在镜像或运行容器中植入带有符号链接（symbolic links）头的恶意 <code>tar</code> 包，在 <code>cp</code> 命令执行解压过程中修改或监控符号链接头同名目录下的任意文件造成破坏。</p>
<h2 id=official-fixed>官方修复的版本</h2>
<ul>
<li>1.14.1</li>
<li>1.13.6</li>
<li>1.12.8</li>
<li>1.11.10</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.10.13-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2019-1002101.1.10.patch target>CVE-2019-1002101.1.10.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-678704d1c81cba20ab7f9af62e484052>2 - CVE-2019-11245</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11245 target>详细信息</a>
<p>这是一个提权漏洞，在通常情况下以容器 <code>Dockerfile</code> 中指定的 <code>USER</code> 运行的容器，在容器重启时或者如果镜像先前被拉到节点时，都将以 <code>root</code>(uid 0) 身份运行</p>
<h2 id=scope>漏洞影响</h2>
<p>所有未指定 <code>mustRunAsNonRoot: true</code> 的 <code>Pod</code>，在容器重启时或者如果镜像先前被拉到节点时，都将以 <code>root</code>(uid 0) 身份运行。</p>
<h2 id=prevention>防范措施</h2>
<p>为 <code>Pod</code> 指定 <code>mustRunAsNonRoot: true</code></p>
<h2 id=official-fixed>官方修复的版本</h2>
<ul>
<li>1.14.3</li>
<li>1.13.7</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.12.10-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/78320.patch target>kubernetes/kubernetes#78320</a></li>
<li>1.11.10-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/78320.patch target>kubernetes/kubernetes#78320</a></li>
<li>1.10.13-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/78320.patch target>kubernetes/kubernetes#78320</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-17adf9e532c044f0bc96bf2fe6fabb70>3 - CVE-2019-11246</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11246 target>详细信息</a>
<p>此漏洞可能允许攻击者利用 <code>kubectl cp</code> 命令，采用路径遍历(Path Traversal)的方式将容器 <code>tar</code> 包中的恶意文件写入所在主机上的任何路径，该过程仅受本地用户的系统权限限制。</p>
<h2 id=scope>漏洞影响</h2>
<p>该漏洞与不久前的 <a href=/zh/docs/patches/cve-2019-1002101 title="此漏洞可能允许攻击者利用 `kubectl cp` 命令执行解压过程中修改或监控符号链接头同名目录下的任意文件造成破坏。
" data-toggle=tooltip data-placement=top target>CVE-2019-1002101</a> 漏洞影响相似，由于之前的相关漏洞修复。</p>
<p><code>kubectl cp</code> 命令用于用户容器和主机之间的文件拷贝，当从容器中拷贝文件时，<code>Kubernetes</code> 会首先在容器中执行 <code>tar</code> 命令创建相应的归档文件，然后发送给客户端，<code>kubectl</code> 会在用户主机上进行相应解压操作。</p>
<p>如果容器 <code>tar</code> 包中包含恶意文件，当攻击者具有 <code>kubectl cp</code> 命令的执行权限时，可以利用路径遍历(Path Traversal)。</p>
<h2 id=official-fixed>官方修复的版本</h2>
<ul>
<li>1.14.3</li>
<li>1.13.7</li>
<li>1.12.10</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.11.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2019-11246.1.11.patch target>CVE-2019-11246.1.11.patch</a></li>
<li>1.10.13-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2019-11246.1.10.patch target>CVE-2019-11246.1.10.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d902d3ffd5b3d43bf94a51814ab569c7>4 - CVE-2019-11247</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11247 target>详细信息</a>
<p><code>API Server</code> 允许通过错误的范围访问自定义的资源</p>
<h2 id=scope>漏洞影响</h2>
<p>如果发出的请求与资源的名称空间相同，则此漏洞允许访问集群范围的自定义的资源。以这种方式访问的资源的授权是使用命名空间内的角色和角色绑定强制执行的，这意味着能访问一个命名空间中的资源，可以进行创建，查看更新或删除群集范围的资源（根据其命名空间角色权限）。</p>
<h2 id=official-fixed>官方修复的版本</h2>
<ul>
<li>1.12.12</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.11.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2019-11247.1.11.patch target>CVE-2019-11247.1.11.patch</a></li>
<li>1.10.13-lts.1 TODO</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-da5de8654ce647927106ce1dae3b6382>5 - CVE-2019-11248</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11248 target>详细信息</a>
<p>可以用过健康检查的端口访问 <code>/debug/pprof</code></p>
<h2 id=scope>漏洞影响</h2>
<p>该漏洞存在于 <code>Kubelet</code> 中，由于用于性能调试的 <code>/debug/pprof</code> 跟健康检查端口 <code>/healthz</code> 绑定在一起 <code>/debug/pprof</code> 会进行安全认证，但 <code>/healthz</code>接口是不认证鉴权的。所以，如果 <code>Kubelet</code> 的 <code>healthz</code> 地址不是使用 <code>localhost</code>，会存在泄露机器敏感信息的风险。</p>
<h2 id=official-fixed>官方修复的版本</h2>
<ul>
<li>1.14.4</li>
<li>1.13.8</li>
<li>1.12.10</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.11.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2019-11248.1.11.patch target>CVE-2019-11248.1.11.patch</a></li>
<li>1.10.13-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2019-11248.1.11.patch target>CVE-2019-11248.1.11.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-9677918ea7ce2b1d4116bfb9d4d31512>6 - CVE-2019-11249</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11249 target>详细信息</a>
<p>此漏洞可能允许恶意攻击者利用目录遍历（Directory Traversal）的方式将容器TAR包中的恶意文件写入或替换至所在主机上目标路径之外的其他位置，该过程仅受本地用户的系统权限限制。</p>
<h2 id=scope>漏洞影响</h2>
<p>该漏洞与不久前的 <a href=/zh/docs/patches/cve-2019-1002101 title="此漏洞可能允许攻击者利用 `kubectl cp` 命令执行解压过程中修改或监控符号链接头同名目录下的任意文件造成破坏。
" data-toggle=tooltip data-placement=top target>CVE-2019-1002101</a>, <a href=/zh/docs/patches/cve-2019-11246 title="此漏洞可能允许攻击者利用 `kubectl cp` 命令，采用路径遍历(Path Traversal)的方式将容器 `tar` 包中的恶意文件写入所在主机上的任何路径，该过程仅受本地用户的系统权限限制。
" data-toggle=tooltip data-placement=top target>CVE-2019-11246</a> 漏洞影响相似，由于之前的相关漏洞修复。</p>
<p><code>kubectl cp</code> 命令用于用户容器和主机之间的文件拷贝，当从容器中拷贝文件时，<code>Kubernetes</code> 会首先在容器中执行 <code>tar</code> 命令创建相应的归档文件，然后发送给客户端，<code>Kubectl</code> 会在用户主机上进行相应解压操作。</p>
<p>如果容器 <code>TAR</code> 包中包含恶意文件，当攻击者具有 <code>kubectl cp</code> 命令的执行权限时，可以利用目录遍历(Directory Traversal)。</p>
<h2 id=official-fixed>官方修复的版本</h2>
<ul>
<li>1.15.2</li>
<li>1.14.5</li>
<li>1.13.9</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.12.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2019-11249.1.12.patch target>CVE-2019-11249.1.12.patch</a></li>
<li>1.11.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2019-11249.1.12.patch target>CVE-2019-11249.1.12.patch</a></li>
<li>1.10.13-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2019-11249.1.10.patch target>CVE-2019-11249.1.10.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3bb42a6493fbd1d3d06aad85c3d8d1e7>7 - CVE-2019-11251</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11251 target>详细信息</a>
<p>TODO</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c1ec3633b18a80bee04f17816082420b>8 - CVE-2020-8552</h1>
<a href=https://www.cvedetails.com/cve/CVE-2020-8552 target>详细信息</a>
<p>TODO</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-5aa68ad2e414f83fec8b9beb2250fdd3>9 - CVE-2020-8558</h1>
<a href=https://www.cvedetails.com/cve/CVE-2020-8558 target>详细信息</a>
<p><code>kube-proxy</code> 组件在 <code>iptables</code> 和 <code>ipvs</code> 模式下均需要设置内核参数 <code>net.ipv4.conf.all.route_localnet=1</code>， 从而允许本地回环访问。攻击者可能通过共享主机网络的容器，或在集群节点访问同一个LAN或二层网络下的相邻节点上绑定监听了本地 <code>127.0.0.1</code> 端口的 TCP/UDP 服务，从而获取接口信息。如果服务没有设置必要的安全认证，可能会造成信息泄露风险。</p>
<h2 id=scope>漏洞影响</h2>
<p>当攻击者拥有主机网络配置能力或运行在一个具备了 <code>CAP_NET_RAW</code> 能力的容器实例时，就可以获取在目标节点上监听了 <code>127.0.0.1</code> 的服务 <code>socket</code> 信息。如果在目标主机上存在 <code>127.0.0.1</code> 可以访问到且不需要任何认证鉴权的暴露服务，那么该服务信息就能被攻击者获取。</p>
<h3 id=cvss>漏洞评分</h3>
<ul>
<li>如果集群 <code>API Server</code> 开启了非认证端口（默认8080），那么攻击者可能获取到 <code>API Server</code> 接口相关信息，威胁等级为高危漏洞，评分为8.8分。</li>
<li>如果集群 <code>API Server</code> 默认关闭了非认证端口，威胁等级为中危漏洞，评分为5.4分。</li>
</ul>
<h2 id=prevention>防范措施</h2>
<p>建议您采取以下安全防范措施：</p>
<p>如果业务容器需使用主机网络模式且又监听在非安全端口上，可以通过在节点上手动添加 <code>iptables</code> 规则来缓解此漏洞。
执行以下命令，在集群中配置 <code>iptables</code> 规则，用于拒绝非本地对 <code>127.0.0.1</code> 的访问流量：</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>iptables -I INPUT --dst 127.0.0.0/8 ! --src 127.0.0.0/8 -m conntrack ! --ctstate RELATED,ESTABLISHED,DNAT -j DROP
</code></pre></div><p>如果集群不需要开启API Server 不安全端口，可以将 &ndash;insecure-port=0 添加到 kubernetes API 服务器命令行来禁用端口。</p>
<p>如集群内运行有不受信的容器，可以禁止 <code>Container</code> 开启 <code>CAP_NET_RAW</code> 能力，可以在 <code>pod spec</code> 中关闭 <code>Container</code> 的 <code>CAP_NET_RAW</code> 能力。</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>securityContext</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>capabilities</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>drop</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> 
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#4e9a06>&#34;NET_RAW&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><p>通过 <code>PodSecurityPolicy</code> 策略限制部署特权或共享主机网络容器，另外可以通过在策略中配置 <code>requiredDropCapabilities</code> 强制容器部署关闭 <code>CAP_NET_RAW</code> 能力。</p>
<h2 id=official-fixed>官方修复的版本</h2>
<ul>
<li>1.18: 1.18.4</li>
<li>1.17: 1.17.7</li>
<li>1.16: 1.16.11</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.15: 1.15.12-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/92040.patch target>kubernetes/kubernetes#92040</a></li>
<li>1.14: 1.14.10-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/92040.patch target>kubernetes/kubernetes#92040</a></li>
<li>1.13: 1.13.12-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/92040.patch target>kubernetes/kubernetes#92040</a></li>
<li>1.12: 1.12.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2020-8558.1.12.patch target>CVE-2020-8558.1.12.patch</a></li>
<li>1.11: 1.11.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/CVE-2020-8558.1.12.patch target>CVE-2020-8558.1.12.patch</a></li>
<li>1.10: 1.10.13-lts.1 TODO</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ce240d314dc85c8ab698d26f1466e5a2>10 - CVE-2020-8559</h1>
<a href=https://www.cvedetails.com/cve/CVE-2020-8559 target>详细信息</a>
<p><code>kube-apiserver</code> 组件的安全漏洞，攻击者可以通过截取某些发送至节点 <code>kubelet</code> 的升级请求，通过请求中原有的访问凭据转发请求至其他目标节点，从而造成节点的权限提升漏洞。</p>
<h2 id=scope>漏洞影响</h2>
<p>由于 <code>kube-apiserver</code> 中在升级请求的代理后端中允许将请求传播回源客户端，攻击者可以通过截取某些发送至节点 <code>kubelet</code> 的升级请求，通过请求中原有的访问凭据转发请求至其他目标节点，从而造成被攻击节点的权限提升漏洞。</p>
<h3 id=cvss>漏洞评分</h3>
<p>该漏洞为中危漏洞， <code>CVSS</code> 评分为6.4。
如果有多个集群共享使用了相同的 <code>CA</code> 和认证凭证，攻击者可以利用此漏洞攻击其他集群，这种情况下该漏洞为高危漏洞。</p>
<h2 id=prevention>防范措施</h2>
<p>对于集群内跨节点的攻击，建议您采取以下安全防范措施：</p>
<ul>
<li>及时吊销可能泄露的 <code>kubeconfig</code> 凭证，并且遵循权限最小化原则，收敛子账号不必要的 <code>pods/exec</code>、<code>pods/attach</code>、<code>pods/portforward</code>和 <code>proxy</code> 类型的资源模型 <code>RBAC</code> 权限。</li>
</ul>
<h2 id=official-fixed>官方修复的版本</h2>
<ul>
<li>1.18.6</li>
<li>1.17.9</li>
<li>1.16.13</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.15.12-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/92971.patch target>kubernetes/kubernetes#92971</a></li>
<li>1.14.10-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/92971.patch target>kubernetes/kubernetes#92971</a></li>
<li>1.13.12-lts.1 TODO</li>
<li>1.12.10-lts.1 TODO</li>
<li>1.11.10-lts.1 TODO</li>
<li>1.10.13-lts.1 TODO</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d4317cf8912bca37373fe5558d2d6285>11 - CVE-2021-3121</h1>
<a href=https://www.cvedetails.com/cve/CVE-2021-3121 target>详细信息</a>
<p>存在该漏洞的程序可能会因为处理了包含恶意 <code>Protobuf</code> 消息而崩溃。如果您使用的 <code>Gogo Protobuf</code> 版本过低，可能存在该漏洞。</p>
<h2 id=scope>漏洞影响</h2>
<p><code>Kubernetes</code> 系统组件由于自身有应对崩溃的恢复机制，当遇到恶意提交的 <code>Protobuf</code> 消息时不会中断服务，所以不在该漏洞的影响范围内。</p>
<p>在应用系统中程序接收处理 <code>Protobuf</code> 消息时，如果组件没有应对崩溃的恢复机制，那么这类程序都在该漏洞影响范围内，且被恶意攻击时服务可能会中断。</p>
<p><code>Kubernetes</code> 社区经过测试验证 <code>API Server</code> 不受该漏洞的影响，但为了避免您受到该安全漏洞隐患的影响，社区对相关 <code>Protobuf</code> 文件进行了升级，具体修复版本如下:</p>
<h2 id=prevention>防范措施</h2>
<p>如果在您的应用系统代码中使用了自动生成的 <code>Protobuf</code> 消息，并且发现相关组件因为以下异常退出，则可能存在该漏洞。</p>
<pre><code>panic: runtime error: index out of range [-9223372036854775804]

goroutine 1 [running]:

v1.(*MessageName).Unmarshal(0xc00006f1e8, 0xc0000281a8, 0xa, 0x10, 0xc00006f1b8, 0x1)

        .../protofile.pb.go:250 +0xb86
</code></pre><p>如果您使用了 <code>Protobuf</code> 消息的相关组件，推荐将 <code>Gogo Protobuf</code> 编译器升级到漏洞修复版本（v1.3.2或更高的版本），再基于升级后的Protobuf<code>编译器重新生成相关的</code>Protobuf` 消息。</p>
<h2 id=official-fixed>官方修复的版本</h2>
<ul>
<li>1.21: 1.21.1</li>
<li>1.20: 1.20.7</li>
<li>1.19: 1.19.11</li>
<li>1.18: 1.18.19</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.17: 1.17.17-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target>kubernetes/kubernetes#101327</a></li>
<li>1.16: 1.16.15-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target>kubernetes/kubernetes#101327</a></li>
<li>1.15: 1.15.12-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target>kubernetes/kubernetes#101327</a></li>
<li>1.14: 1.14.10-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target>kubernetes/kubernetes#101327</a></li>
<li>1.13: 1.13.12-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target>kubernetes/kubernetes#101327</a></li>
<li>1.12: 1.12.10-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target>kubernetes/kubernetes#101327</a></li>
<li>1.11: 1.11.10-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target>kubernetes/kubernetes#101327</a></li>
<li>1.10: 1.10.13-lts.1 <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target>kubernetes/kubernetes#101327</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-66481705776642cc7da302c2a84c2907>12 - nokmem</h1>
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1507149" target>详细信息</a>
<p>节点磁盘充足但是一直报磁盘不足无法创建 <code>Pod</code></p>
<h2 id=scope>Bug 影响</h2>
<p>节点长期使用的时候提示剩余空间不足的错误，具体如下所示：</p>
<pre><code>mkdir: cannot create directory '/sys/fs/cgroup/memory/8': No space left on device
</code></pre><p>节点磁盘充足但是一直报和这个错误, 并且创建 <code>Pod</code> 总是失败，这是一个潜在的“定时炸弹”。</p>
<p>所有使用低版本内核的环境，k8s 1.22 之前的版本都受到影响, 在 runc 1.0.0-rc94 (<a href=https://github.com/opencontainers/runc/pull/2840 target>opencontainers/runc#2840</a>) 修复(直接移除了)</p>
<h2 id=prevention>防范措施</h2>
<ul>
<li>升级系统内核</li>
<li>k8s 1.14 及以上
<ul>
<li>重新构建 Kubelet 带上 <code>-tags=nokmem</code></li>
</ul>
</li>
<li>k8s 1.14 以下
<ul>
<li>硬编码, 可以参考 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.13.patch target>nokmem.1.13.patch</a></li>
</ul>
</li>
</ul>
<h2 id=klts-fixed>KLTS 修复的版本</h2>
<ul>
<li>1.18.20-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.18.patch target>nokmem.1.18.patch</a></li>
<li>1.17.17-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.18.patch target>nokmem.1.18.patch</a></li>
<li>1.16.15-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.18.patch target>nokmem.1.18.patch</a></li>
<li>1.15.12-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.18.patch target>nokmem.1.18.patch</a></li>
<li>1.14.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.18.patch target>nokmem.1.18.patch</a></li>
<li>1.13.12-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.13.patch target>nokmem.1.13.patch</a></li>
<li>1.12.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.13.patch target>nokmem.1.13.patch</a></li>
<li>1.11.10-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.13.patch target>nokmem.1.13.patch</a></li>
<li>1.10.13-lts.1 <a href=https://github.com/klts-io/kubernetes-lts/raw/master/patches/nokmem.1.13.patch target>nokmem.1.13.patch</a></li>
</ul>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list">
<a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="User mailing list">
<i class="fa fa-envelope"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank rel=noopener href=https://example.org/twitter aria-label=Twitter>
<i class="fab fa-twitter"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow">
<a class=text-white target=_blank rel=noopener href=https://example.org/stack aria-label="Stack Overflow">
<i class="fab fa-stack-overflow"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/klts-io/website aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack>
<a class=text-white target=_blank rel=noopener href=https://example.org/slack aria-label=Slack>
<i class="fab fa-slack"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list">
<a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list">
<i class="fa fa-envelope"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2021 The KLTS.io Authors 版权所有</small>
<p class=mt-2><a href=/zh/about/>关于 KLTS</a></p>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js integrity="sha256-OxcsE7YsK+qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin=anonymous></script>
</body>
</html>