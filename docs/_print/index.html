<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.87.0"><link rel=canonical type=text/html href=/docs/>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>Document | KLTS.io</title>
<meta name=description content="KLTS.io website"><meta property="og:title" content="Document">
<meta property="og:description" content="KLTS.io website">
<meta property="og:type" content="website">
<meta property="og:url" content="/docs/"><meta property="og:site_name" content="KLTS.io">
<meta itemprop=name content="Document">
<meta itemprop=description content="KLTS.io website"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Document">
<meta name=twitter:description content="KLTS.io website">
<link rel=preload href=/scss/main.min.650bdee92aa16b3ae39822dd8dfd62356c714a590c397f4abe76572440c62901.css as=style>
<link href=/scss/main.min.650bdee92aa16b3ae39822dd8dfd62356c714a590c397f4abe76572440c62901.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo><svg id="Graph" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><g id="KLTS_-_Graph_-_Light" data-name="KLTS - Graph - Light"><path id="Secondary" d="M174.54 276.539c-23.254 5.244-46.3 13.984-70.386 26.563V249.768A322.072 322.072.0 01153.4 232.2q11.784-3.111 23.743-5.193a84.322 84.322.0 00-2.6 49.53zm54.832-100.2c-18.627-17.387-38.964-31.808-61.2-44.965L119.7 159.357c29.816 15.76 52.067 30.719 69.575 45.639a84.135 84.135.0 0140.097-28.661zm20.63-4.1c1.983-.14 3.979-.237 6-.237a83.588 83.588.0 0141.393 10.916 251.959 251.959.0 00.78-28.448 297.8 297.8.0 00-6.564-53.245L256 80.664l-16.489 9.52c6.65 24.114 10.095 45.37 10.682 65.672Q250.433 164.112 250 172.237zm-64.76 129.007q-4.648 8.227-8.758 16.752a324.529 324.529.0 00-20.49 55.6l43.21 24.947c5.824-24.5 13.469-45.93 23.455-65.437A84.3 84.3.0 01185.242 301.244zM374.19 148.9c-19 18.863-37.743 34.831-58.691 47.809a83.826 83.826.0 0122.786 42.325c25.366-15.381 47.642-34.187 69.561-55.9v-14.8zM298.741 328.308A83.582 83.582.0 01256 340q-2.149.0-4.272-.108c1.842 4.863 3.807 9.68 5.93 14.446 8.355 18.751 19.118 37.369 33 56.991l41.757-24.108c-13.306-18.382-23.351-35.46-30.908-52.419C300.542 332.644 299.63 330.478 298.741 328.308zm40.874-64.358a83.578 83.578.0 01-18.131 44.635c26.246 8.936 54.539 14.141 86.362 16.028v-48.08a284.525 284.525.0 01-57.161-9.231Q345.087 265.763 339.615 263.95z" fill="#fff" opacity=".66"/><path id="Primary" d="M256 71.426l159.846 92.287V348.287L256 440.574 96.154 348.287V163.713L256 71.426M256 16 48.154 136V376L256 496 463.846 376V136L256 16zm0 204a36 36 0 11-25.456 10.544A35.767 35.767.0 01256 220m0-48a84 84 0 1059.4 24.6A83.738 83.738.0 00256 172z" fill="#fff"/><rect id="Frame" width="512" height="512" fill="none"/></g></svg></span><span class="text-uppercase font-weight-bold">KLTS.io</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/about/><span>About</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/blog/><span>Blog</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/><span class=active>Document</span></a>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/zh/docs/>中文 Chinese</a>
</div>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
<input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.4ac33d2492d954bc7c19ea9723c418fc.json data-offline-search-base-href=/ data-offline-search-max-results=10>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
</div>
<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
</div>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href=/docs/>Return to the regular view of this page</a>.
</p>
</div>
<h1 class=title>Document</h1>
<ul>
<li>1: <a href=#pg-583fb1d89ccf082c48164b7b3e179cf3>Overview</a></li>
<li>2: <a href=#pg-50ddcb3cdb08fbe2ad5d04311c273b4c>Preparation</a></li>
<li>3: <a href=#pg-c170895d2a643e556fcae1338dee8dce>Instal with script</a></li>
<li>4: <a href=#pg-64407d3e6d5ef382426bdfbcae040c6a>Install</a></li>
<li>5: <a href=#pg-c258a50dfe331dfdf852330040bd8f14>Post Install</a></li>
<li>6: <a href=#pg-a7c9e10a31abdecaec5a338462a220a8>Developer Guide</a></li>
<ul>
<li>6.1: <a href=#pg-79fcc7e024580df9da30cdb10805eada>Clone</a></li>
<li>6.2: <a href=#pg-8da562538e76378aaf2ff1c50166f299>Dependencies</a></li>
</ul>
</ul>
<div class=content>
</div>
</div>
<div class=td-content>
<h1 id=pg-583fb1d89ccf082c48164b7b3e179cf3>1 - Overview</h1>
<p>KLTS, known as Kubernetes Long Term Support, has a primary mission to provide free long-term maintenance support for earlier versions of Kubernetes.</p>
<p>Kubernetes versions are expressed as <strong>x.y.z</strong>, where <strong>x</strong> is the major version, <strong>y</strong> is the minor version, and <strong>z</strong> is the patch version. For the versions maintained by KLTS, it is followed by a string beginning with <strong>lts</strong>.</p>
<p>One of the reasons to maintain earlier versions is the fact that in a real production environment, the latest release is not the best or the most stable. In a normal case, As shown in the table below, a stable release of Kubernetes is not available until one year after the initial release of a particular version. For details see <a href=#release-cycle>Kubernetes release cycle</a>.</p>
<p>As shown below, 1.10 - 1.18 are the versions being maintained by KLTS, while 1.19 - 1.22 are the versions currently being maintained by the Kubernetes community, as described in the <a href=https://kubernetes.io/releases/version-skew-policy/#supported-versions>Version Skew Policy</a>。</p>
<img src=../klts_job.png width=750>
<p>Take 1.19 as an example, its stable release is expected to be available on October 28, 2021, but the stable release of 1.19 is not fully compatible with many features of 1.10 to 1.18, and there are countless iterations of development in between. If an enterprise rashly upgrades its kernel to 1.19, it is likely to cause production accidents. Other new versions such as 1.20 - 1.22 have similar problems.</p>
<p>The choice of most enterprises today is to stay with earlier versions and not rush to upgrade. But the Kubernetes community only maintains the most recent four releases, how can you keep earlier versions safe from the CVE bugs and vulnerabilities that the community may discover from time to time? That&rsquo;s where KLTS comes in! We provide free maintenance support for earlier versions for up to three years.</p>
<h2 id=maint-cycle>KLTS release cycle</h2>
<p>KLTS currently maintains nine stable releases: 1.10.13, 1.11.10, 1.12.10. 1.13.12, 1.14.10, 1.15.12, 1.16.15, 1.17.17, 1.18.20.</p>
<p>If the Kubernetes community finds new CVE vulnerabilities or bugs, the KLTS team will take over those releases that the community has abandoned for maintenance and keep them in a continuous maintenance state. The current maintenance cycle for these nine releases is as follows.</p>
<p><img src=../whatKLTSdoes.png alt="maintained by KLTS"></p>
<p>As shown above, the Kubernetes community typically has a maintenance cycle of about one year for a minor version, while KLTS can provide long-term maintenance for the next three years until the code becomes obviously incompatible and the version will be phased out.</p>
<h2 id=bug-fix>Bug fix</h2>
<p>As an example, the <a href=https://www.cvedetails.com/cve/CVE-2021-3121>CVE-2021-3121</a> vulnerability discovered in January 2021 has a CVSS score of 7.5. However, as of September 2021 the Kubernetes community:</p>
<ul>
<li>Only fixed four versions: 1.18, 1.19, 1.20, 1.21</li>
<li>Announced that “all prior versions remain exposed and users should stop using them immediately”</li>
<li><a href=https://github.com/kubernetes/kubernetes/issues/101435>Requests to fix earlier versions</a> are denied:</li>
</ul>
<p><img src=../cve2021.png alt=CVE-2021-3121></p>
<p>KLTS addresses this situation by diligently fixing eight earlier versions that were heavily affected by the <a href=https://www.cvedetails.com/cve/CVE-2021-3121>CVE-2021-3121</a> vulnerability. No complaints, no demands!</p>
<ul>
<li>v1.17.17</li>
<li>v1.16.15</li>
<li>v1.15.12</li>
<li>v1.14.10</li>
<li>v1.13.12</li>
<li>v1.12.10</li>
<li>v1.11.10</li>
<li>v1.10.13</li>
</ul>
<p>If you feel that the KLTS team&rsquo;s efforts are valuable and interesting to you, don’t hesitate to join the <a href=https://github.com/klts-io>KLTS community</a> to talk and contribute.</p>
<h2 id=release-cycle>Kubernetes release cycle</h2>
<table>
<thead>
<tr>
<th style=text-align:left><strong>Ver.</strong></th>
<th style=text-align:left><strong>Initial release date</strong></th>
<th style=text-align:left><strong>Stable release date</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:left>1.10</td>
<td style=text-align:left>2018-03-27</td>
<td style=text-align:left>2019-02-13</td>
</tr>
<tr>
<td style=text-align:left>1.11</td>
<td style=text-align:left>2018-07-28</td>
<td style=text-align:left>2019-05-01</td>
</tr>
<tr>
<td style=text-align:left>1.12</td>
<td style=text-align:left>2018-09-28</td>
<td style=text-align:left>2019-07-08</td>
</tr>
<tr>
<td style=text-align:left>1.13</td>
<td style=text-align:left>2018-12-04</td>
<td style=text-align:left>2019-10-15</td>
</tr>
<tr>
<td style=text-align:left>1.14</td>
<td style=text-align:left>2019-03-25</td>
<td style=text-align:left>2019-12-11</td>
</tr>
<tr>
<td style=text-align:left>1.15</td>
<td style=text-align:left>2019-07-20</td>
<td style=text-align:left>2020-05-06</td>
</tr>
<tr>
<td style=text-align:left>1.16</td>
<td style=text-align:left>2019-09-18</td>
<td style=text-align:left>2020-09-02</td>
</tr>
<tr>
<td style=text-align:left>1.17</td>
<td style=text-align:left>2019-12-08</td>
<td style=text-align:left>2021-01-13</td>
</tr>
<tr>
<td style=text-align:left>1.18</td>
<td style=text-align:left>2020-03-25</td>
<td style=text-align:left>2021-06-18</td>
</tr>
<tr>
<td style=text-align:left>1.19</td>
<td style=text-align:left>2020-08-26</td>
<td style=text-align:left>2021-10-28</td>
</tr>
<tr>
<td style=text-align:left>1.20</td>
<td style=text-align:left>2020-12-08</td>
<td style=text-align:left>2022-02-28</td>
</tr>
<tr>
<td style=text-align:left>1.21</td>
<td style=text-align:left>2021-04-08</td>
<td style=text-align:left>2022-06-28</td>
</tr>
<tr>
<td style=text-align:left>1.22</td>
<td style=text-align:left>2021-08-04</td>
<td style=text-align:left>2022-10-28</td>
</tr>
</tbody>
</table>
<p>An initial release refers to the first official release of a minor version such as 1.10.0, 1.11.0 &mldr; 1.22.0, etc.</p>
<p>A stable release is usually the final bug-fix release about one year after the initial release. It refers to the release of End Of Life (EOL), i.e., the community will not maintain this version from then on.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-50ddcb3cdb08fbe2ad5d04311c273b4c>2 - Preparation</h1>
<p><img src=https://raw.githubusercontent.com/kubernetes/kubeadm/master/logos/stacked/color/kubeadm-stacked-color.png align=right width=150px>This page introduces some preparations before installation. For example, it is required to install the <code>kubeadm</code> toolbox to get started. For information on how to create a cluster with kubeadm, see the <a href=/docs/install target>Install</a> page.</p>
<h2 id=before-you-begin>Before you begin</h2>
<ul>
<li>A compatible Linux host. The Kubernetes project provides generic instructions for Linux distributions based on Debian and Red Hat, and those distributions without a package manager.</li>
<li>2 GB or more of RAM per machine (any less will leave little room for your apps).</li>
<li>2 CPUs or more.</li>
<li>Good network connectivity between all nodes in the cluster (either public or on-premise network).</li>
<li>The hostname, MAC address, and product_uuid shall be unique for every node. See <a href=#verify-mac-address target=_blank>here</a> for more details.</li>
<li>Open the required ports on the host. See <a href=#check-required-ports target=_blank>Check required ports</a> for more details.</li>
<li>Disable the swap partition. You <strong>MUST</strong> disable the swap partition to keep the kubelet working properly.</li>
</ul>
<h2 id=verify-mac-address>Verify the MAC address and product_uuid are unique for every node</h2>
<ul>
<li>Get the MAC address of the network interfaces using the command <code>ip link</code> or <code>ifconfig -a</code></li>
<li>Check the product_uuid using the command <code>sudo cat /sys/class/dmi/id/product_uuid</code></li>
</ul>
<p>It is very likely that hardware devices have unique addresses although some virtual machines may use identical addresses. Kubernetes uses these addresses to uniquely identify the nodes in the cluster. If these addresses are not unique to each node, the installation process may <a href=https://github.com/kubernetes/kubeadm/issues/31 target=_blank>fail</a>.</p>
<h2 id=check-network-adapters>Check network adapters</h2>
<p>If you have more than one network adapter and your Kubernetes components are not reachable via the default route, it is recommended to add IP route(s) so the Kubernetes cluster can set up proper connections via the appropriate adapter.</p>
<h2 id=letting-iptables-see-bridged-traffic>Letting iptables see bridged traffic</h2>
<p>Make sure that the <code>br_netfilter</code> module is loaded. This can be done by running <code>lsmod | grep br_netfilter</code>. To load it explicitly, you can run the command <code>sudo modprobe br_netfilter</code>.</p>
<p>To enable the iptables on your Linux node to correctly see bridged traffic, you should ensure <code>net.bridge.bridge-nf-call-iptables</code> is set to 1 in your <code>sysctl</code> config, e.g.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.conf
</span><span style=color:#4e9a06>br_netfilter
</span><span style=color:#4e9a06>EOF</span>

cat <span style=color:#4e9a06>&lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf
</span><span style=color:#4e9a06>net.bridge.bridge-nf-call-ip6tables = 1
</span><span style=color:#4e9a06>net.bridge.bridge-nf-call-iptables = 1
</span><span style=color:#4e9a06>EOF</span>
sudo sysctl --system
</code></pre></div><p>For more details see the <a href=https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/#network-plugin-requirements target=_blank>Network Plugin Requirements</a> page.</p>
<h2 id=check-required-ports>Check required ports</h2>
<p>This section lists all ports that you may use on your nodes.</p>
<h3 id=control-plane-nodes>Control-plane node(s)</h3>
<table>
<thead>
<tr>
<th>Protocol</th>
<th>Direction</th>
<th>Port Range</th>
<th>Purpose</th>
<th>Used By</th>
</tr>
</thead>
<tbody>
<tr>
<td>TCP</td>
<td>Inbound</td>
<td>6443*</td>
<td>Kubernetes API server</td>
<td>All</td>
</tr>
<tr>
<td>TCP</td>
<td>Inbound</td>
<td>2379-2380</td>
<td>etcd server client API</td>
<td>kube-apiserver, etcd</td>
</tr>
<tr>
<td>TCP</td>
<td>Inbound</td>
<td>10250</td>
<td>kubelet API</td>
<td>Self, Control plane</td>
</tr>
<tr>
<td>TCP</td>
<td>Inbound</td>
<td>10251</td>
<td>kube-scheduler</td>
<td>Self</td>
</tr>
<tr>
<td>TCP</td>
<td>Inbound</td>
<td>10252</td>
<td>kube-controller-manager</td>
<td>Self</td>
</tr>
</tbody>
</table>
<h3 id=worker-nodes>Worker node(s)</h3>
<table>
<thead>
<tr>
<th>Protocol</th>
<th>Direction</th>
<th>Port Range</th>
<th>Purpose</th>
<th>Used By</th>
</tr>
</thead>
<tbody>
<tr>
<td>TCP</td>
<td>Inbound</td>
<td>10250</td>
<td>kubelet API</td>
<td>Self, Control plane</td>
</tr>
<tr>
<td>TCP</td>
<td>Inbound</td>
<td>30000-32767</td>
<td>NodePort Services†</td>
<td>All</td>
</tr>
</tbody>
</table>
<p>Above is the default port range for <a href=https://kubernetes.io/docs/concepts/services-networking/service/ target=_blank>NodePort Services</a>.</p>
<p>Any port numbers marked with * are overridable, so you will need to ensure any custom ports you provide are also open.</p>
<p>Although etcd ports are included in control-plane nodes, you can also host your own etcd cluster externally or on custom ports.</p>
<p>The pod network plugin you use (see below) may also require certain ports to be open. Since this differs with each pod network plugin, see the documentation for the plugins about what port(s) those need.</p>
<h2 id=setting-a-host-name>Setting a host name</h2>
<p>Set a hostname for your host by using the following command:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hostnamectl set-hostname your-new-host-name
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;127.0.0.1 </span><span style=color:#204a87;font-weight:700>$(</span>hostname<span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>&#34;</span> &gt;&gt; /etc/hosts
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;::1       </span><span style=color:#204a87;font-weight:700>$(</span>hostname<span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>&#34;</span> &gt;&gt; /etc/hosts
</code></pre></div><h2 id=disable-swap>Disable Swap</h2>
<p>Run the following command to disable the partition swap:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>swapoff -a
</code></pre></div><p>If you want to disable swap permanently, edit the <code>/etc/fstab</code> file to comment out the swap mount.</p>
<h2 id=disable-selinux>Disable Selinux</h2>
<p>Run the following command to disable the selinux:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>setenforce <span style=color:#0000cf;font-weight:700>0</span>
</code></pre></div><p>If you want to disable selinux permanently, edit <code>/etc/sysconfig/selinux</code> and replace <code>SELINUX=enforcing</code> with <code>SELINUX=disabled</code>.</p>
<h2 id=installing-runtime>Install Runtime</h2>
<p>To run containers in Pods, Kubernetes uses a Container Runtime Interface (CRI).</p>
<ul class="nav nav-tabs" id=container-runtimes role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#container-runtimes-0 role=tab aria-controls=container-runtimes-0 aria-selected=true>Linux Node</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#container-runtimes-1 role=tab aria-controls=container-runtimes-1>Other OS</a></li></ul>
<div class=tab-content id=container-runtimes><div id=container-runtimes-0 class="tab-pane show active" role=tabpanel aria-labelledby=container-runtimes-0>
<p><p>By default, Kubernetes uses a CRI to interface with your chosen container runtime.</p>
<p>If you don&rsquo;t specify a runtime, kubeadm automatically tries to detect an installed container runtime by scanning through a list of well-known Unix domain sockets. The following table lists container runtimes and their associated socket paths:</p>
<table>
<thead>
<tr>
<th>Runtime</th>
<th>Path to Unix domain socket</th>
</tr>
</thead>
<tbody>
<tr>
<td>Docker</td>
<td>/var/run/dockershim.sock</td>
</tr>
<tr>
<td>Containerd</td>
<td>/run/containerd/containerd.sock</td>
</tr>
<tr>
<td>CRI-O</td>
<td>/var/run/crio/crio.sock</td>
</tr>
</tbody>
</table>
<br>
If both Docker and Containerd are detected, Docker takes precedence. This is inevitable because Docker 18.09 ships with Containerd and both are detectable even if you only installed Docker. If any other two or more runtimes are detected, kubeadm exits with an error.
<p>The kubelet integrates with Docker through the built-in <code>dockershim</code> CRI implementation.</p>
</div>
<div id=container-runtimes-1 class=tab-pane role=tabpanel aria-labelledby=container-runtimes-1>
<p><p>By default, kubeadm uses Docker as the container runtime. The kubelet integrates with Docker through the built-in <code>dockershim</code> CRI implementation.</p>
</div></div>
<ul class="nav nav-tabs" id=tabset-docspre-install-3 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-docspre-install-3-0 role=tab aria-controls=tabset-docspre-install-3-0 aria-selected=true>Docker</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-docspre-install-3-1 role=tab aria-controls=tabset-docspre-install-3-1>Containerd</a></li></ul>
<div class=tab-content id=tabset-docspre-install-3><div id=tabset-docspre-install-3-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-docspre-install-3-0>
<p>
<ul class="nav nav-tabs" id=tabset-docspre-install-2 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-docspre-install-2-0 role=tab aria-controls=tabset-docspre-install-2-0 aria-selected=true>Red Hat-based distributions</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-docspre-install-2-1 role=tab aria-controls=tabset-docspre-install-2-1>Debian-based distributions</a></li></ul>
<div class=tab-content id=tabset-docspre-install-2><div id=tabset-docspre-install-2-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-docspre-install-2-0>
<p><p>Run the following command to install a Red Hat-based distribution:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum install docker
</code></pre></div></div>
<div id=tabset-docspre-install-2-1 class=tab-pane role=tabpanel aria-labelledby=tabset-docspre-install-2-1>
<p><p>Run the following command to install a Debian-based distribution:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>apt-get install docker.io
</code></pre></div></div></div>
</div>
<div id=tabset-docspre-install-3-1 class=tab-pane role=tabpanel aria-labelledby=tabset-docspre-install-3-1>
<p><p>By default, Containerd only provides download packages for the amd64 architecture. If you are using a different architecture, you can install the <code>containerd.io</code> package from the official Docker repository. Instructions for setting up the Docker repository and installing the <code>containerd.io</code> package for your respective Linux distribution can be found in <a href=https://docs.docker.com/engine/install/#server target=_blank>Installing the Docker Engine</a>.</p>
<p>You can also use the following source code to build.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.5.4
wget -c https://github.com/containerd/containerd/releases/download/v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>/containerd-<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>-linux-amd64.tar.gz
tar xvf containerd-<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>-linux-amd64.tar.gz -C /usr/local/
mkdir /etc/containerd/ <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> containerd config default &gt; /etc/containerd/config.toml
wget -c -O /etc/systemd/system/containerd.service https://raw.githubusercontent.com/containerd/containerd/main/containerd.service
systemctl start containerd <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> systemctl <span style=color:#204a87>enable</span> containerd
</code></pre></div></div></div>
<p>See <a href=https://kubernetes.io/docs/setup/production-environment/container-runtimes/ target=_blank>container runtimes</a> for more information.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c170895d2a643e556fcae1338dee8dce>3 - Instal with script</h1>
<p>KLTS provides a script that automates the installation process</p>
<h2 id=install>Install</h2>
<pre><code>wget https://github.com/klts-io/klts/raw/main/install.sh
chmod +x install.sh
./install.sh
</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-64407d3e6d5ef382426bdfbcae040c6a>4 - Install</h1>
<p>KLTS provides a way to install software sources based on Deb and RPM.
You can choose the installation method that suits your system.</p>
<p>Before installation, ensure that your <a href=/docs/pre-install target>Preparation</a> is good enough.</p>
<h2 id=set-the-klts-software-source>Set the KLTS software source</h2>
<ul class="nav nav-tabs" id=tabset-docsinstall-1 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-docsinstall-1-0 role=tab aria-controls=tabset-docsinstall-1-0 aria-selected=true>Red Hat-based distributions</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-docsinstall-1-1 role=tab aria-controls=tabset-docsinstall-1-1>Debian-based distributions</a></li></ul>
<div class=tab-content id=tabset-docsinstall-1><div id=tabset-docsinstall-1-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-docsinstall-1-0>
<p><p>Run the following code to set the source of downloading a proper distribution:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; \EOF &gt; /etc/yum.repos.d/klts.repo
</span><span style=color:#4e9a06>[klts]
</span><span style=color:#4e9a06>name=klts
</span><span style=color:#4e9a06>baseurl=https://dl.klts.io/rpm/$basearch/
</span><span style=color:#4e9a06>enabled=1
</span><span style=color:#4e9a06>gpgcheck=0
</span><span style=color:#4e9a06>EOF</span>

yum makecache
</code></pre></div></div>
<div id=tabset-docsinstall-1-1 class=tab-pane role=tabpanel aria-labelledby=tabset-docsinstall-1-1>
<p><p>Run the following code to set the source of downloading a proper distribution:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; EOF &gt; /etc/apt/sources.list.d/klts.list
</span><span style=color:#4e9a06>deb [trusted=yes] https://dl.klts.io/deb stable main
</span><span style=color:#4e9a06>EOF</span>

apt-get update
</code></pre></div></div></div>
<h2 id=install>Install</h2>
<ul class="nav nav-tabs" id=tabset-docsinstall-4 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-docsinstall-4-0 role=tab aria-controls=tabset-docsinstall-4-0 aria-selected=true>Install</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-docsinstall-4-1 role=tab aria-controls=tabset-docsinstall-4-1>Install the specified releases</a></li></ul>
<div class=tab-content id=tabset-docsinstall-4><div id=tabset-docsinstall-4-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-docsinstall-4-0>
<p>
<ul class="nav nav-tabs" id=tabset-docsinstall-2 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-docsinstall-2-0 role=tab aria-controls=tabset-docsinstall-2-0 aria-selected=true>Red Hat-based distributions</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-docsinstall-2-1 role=tab aria-controls=tabset-docsinstall-2-1>Debian-based distributions</a></li></ul>
<div class=tab-content id=tabset-docsinstall-2><div id=tabset-docsinstall-2-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-docsinstall-2-0>
<p><p>Run the following code to install a proper distribution:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum install kubeadm kubelet kubectl
</code></pre></div></div>
<div id=tabset-docsinstall-2-1 class=tab-pane role=tabpanel aria-labelledby=tabset-docsinstall-2-1>
<p><p>Run the following code to install a proper distribution:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>apt-get install kubeadm kubelet kubectl
</code></pre></div></div></div>
</div>
<div id=tabset-docsinstall-4-1 class=tab-pane role=tabpanel aria-labelledby=tabset-docsinstall-4-1>
<p>
<ul class="nav nav-tabs" id=tabset-docsinstall-3 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-docsinstall-3-0 role=tab aria-controls=tabset-docsinstall-3-0 aria-selected=true>Red Hat-based distributions</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-docsinstall-3-1 role=tab aria-controls=tabset-docsinstall-3-1>Debian-based distributions</a></li></ul>
<div class=tab-content id=tabset-docsinstall-3><div id=tabset-docsinstall-3-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-docsinstall-3-0>
<p><p>Run the following code to install a proper distribution:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># Search for supported releases</span>
yum search kubeadm --showduplicates <span style=color:#000;font-weight:700>|</span> grep kubeadm-

<span style=color:#8f5902;font-style:italic># Install</span>
<span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.0
yum install kubeadm-v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span> kubelet-v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span> kubectl-v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div></div>
<div id=tabset-docsinstall-3-1 class=tab-pane role=tabpanel aria-labelledby=tabset-docsinstall-3-1>
<p><p>Run the following code to install a proper distribution:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># Search for supported releases</span>
apt-cache show kubeadm <span style=color:#000;font-weight:700>|</span> grep Version

<span style=color:#8f5902;font-style:italic># Install</span>
<span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.0
apt-get install <span style=color:#000>kubeadm</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span> <span style=color:#000>kubelet</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span> <span style=color:#000>kubectl</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div></div></div>
</div></div>
<h2 id=auto-start-kubelet-on-boot>Auto-start Kubelet on boot</h2>
<p>Run the following code to start Kubelet on boot:</p>
<pre><code>systemctl enable kubelet
</code></pre><h2 id=pull-the-dependency-image>Pull the dependency image</h2>
<p>Run the following code to pull the dependency image:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.0
<span style=color:#000>REPOS</span><span style=color:#ce5c00;font-weight:700>=</span>ghcr.io/klts-io/kubernetes-lts
kubeadm config images pull --image-repository <span style=color:#4e9a06>${</span><span style=color:#000>REPOS</span><span style=color:#4e9a06>}</span> --kubernetes-version v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div><p>All subsequent operations on Kubeadm need to include <code>--image-repository</code>, <code>--kubernetes-version</code> actively specifying the image</p>
<h2 id=initialize-the-control-plane-node>Initialize the control plane node</h2>
<p>Run the following code to initialize the control plane node:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.0
<span style=color:#000>REPOS</span><span style=color:#ce5c00;font-weight:700>=</span>ghcr.io/klts-io/kubernetes-lts
kubeadm init --image-repository <span style=color:#4e9a06>${</span><span style=color:#000>REPOS</span><span style=color:#4e9a06>}</span> --kubernetes-version v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div><p>For details see <a href=https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/ target=_blank>Create a cluster with kubeadm</a>.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c258a50dfe331dfdf852330040bd8f14>5 - Post Install</h1>
<p>TODO</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-a7c9e10a31abdecaec5a338462a220a8>6 - Developer Guide</h1>
</div>
<div class=td-content>
<h1 id=pg-79fcc7e024580df9da30cdb10805eada>6.1 - Clone</h1>
<p>This page describes how you can clone a Kubernetes master branch to your local computer.</p>
<h2 id=clone-single-branch>Clone single branch</h2>
<p>Since the <code>repos</code> branch is used as a software source for RPM and DEB, it will be very large to directly clon it, so you shall try to only clone the master branch.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone --single-branch -b master https://github.com/klts-io/kubernetes-lts
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-8da562538e76378aaf2ff1c50166f299>6.2 - Dependencies</h1>
<p>This page describes how you can install dependencies on different operating systems.</p>
<h2 id=install-dependencies>Install dependencies</h2>
<ul class="nav nav-tabs" id=tabset-docsdeveloper-guidedependent-1 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-docsdeveloper-guidedependent-1-0 role=tab aria-controls=tabset-docsdeveloper-guidedependent-1-0 aria-selected=true>MacOS</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-docsdeveloper-guidedependent-1-1 role=tab aria-controls=tabset-docsdeveloper-guidedependent-1-1>Red Hat-based distributions</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-docsdeveloper-guidedependent-1-2 role=tab aria-controls=tabset-docsdeveloper-guidedependent-1-2>Debian-based distributions</a></li></ul>
<div class=tab-content id=tabset-docsdeveloper-guidedependent-1><div id=tabset-docsdeveloper-guidedependent-1-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-docsdeveloper-guidedependent-1-0>
<p><p>Run the following code to install the dependencies:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew install jq git python@3 <span style=color:#8f5902;font-style:italic># Install brew, See https://brew.sh/</span>
pip3 install yq
</code></pre></div></div>
<div id=tabset-docsdeveloper-guidedependent-1-1 class=tab-pane role=tabpanel aria-labelledby=tabset-docsdeveloper-guidedependent-1-1>
<p><p>Run the following code to install the dependencies:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum install -y epel-release
yum install -y jq git python3
pip3 install yq
</code></pre></div></div>
<div id=tabset-docsdeveloper-guidedependent-1-2 class=tab-pane role=tabpanel aria-labelledby=tabset-docsdeveloper-guidedependent-1-2>
<p><p>Run the following code to install the dependencies:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>apt-get install -y jq git python3 python3-pip
pip3 install yq
</code></pre></div></div></div>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/klts-io aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack>
<a class=text-white target=_blank rel=noopener href=https://klts.slack.com aria-label=Slack>
<i class="fab fa-slack"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list">
<a class=text-white target=_blank rel=noopener href=mailto:klts-io@googlegroups.com aria-label="Developer mailing list">
<i class="fa fa-envelope"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2021 The KLTS.io Authors All Rights Reserved</small>
<p class=mt-2><a href=/about/>About KLTS</a></p>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js integrity="sha256-OxcsE7YsK+qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin=anonymous></script>
</body>
</html>